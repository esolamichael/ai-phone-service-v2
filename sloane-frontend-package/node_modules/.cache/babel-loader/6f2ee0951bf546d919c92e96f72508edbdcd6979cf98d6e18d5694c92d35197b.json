{"ast":null,"code":"import React,{useState}from'react';import{Box,Typography,TextField,Button,Paper,Container,Grid,Link,Alert,CircularProgress,useTheme}from'@mui/material';import{Link as RouterLink,useParams,useNavigate}from'react-router-dom';import{Formik,Form,Field}from'formik';import*as Yup from'yup';import{useAuth}from'../../contexts/AuthContext';import LoadingSpinner from'../../components/common/LoadingSpinner';import{enhancedApiCall}from'../../utils/ErrorHandling';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ResetPasswordSchema=Yup.object().shape({password:Yup.string().min(8,'Password must be at least 8 characters').required('Password is required'),confirmPassword:Yup.string().oneOf([Yup.ref('password'),null],'Passwords must match').required('Confirm password is required')});const ResetPasswordPage=()=>{const[success,setSuccess]=useState(false);const[error,setError]=useState('');const{resetPassword}=useAuth();const{token}=useParams();const navigate=useNavigate();const theme=useTheme();const handleSubmit=async(values,_ref)=>{let{setSubmitting}=_ref;try{setError('');await resetPassword(token,values.password);setSuccess(true);setTimeout(()=>{navigate('/login');},3000);}catch(err){setError(err.message||'Failed to reset password. Please try again.');}finally{setSubmitting(false);}};return/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",children:/*#__PURE__*/_jsx(Box,{sx:{py:8},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:4,borderRadius:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{mb:4,textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"Reset Password\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",children:\"Enter your new password below\"})]}),success?/*#__PURE__*/_jsx(Alert,{severity:\"success\",sx:{mb:3},children:\"Password reset successful! You will be redirected to the login page shortly.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},children:error}),!token&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},children:\"Invalid or missing reset token. Please request a new password reset link.\"}),token&&/*#__PURE__*/_jsx(Formik,{initialValues:{password:'',confirmPassword:''},validationSchema:ResetPasswordSchema,onSubmit:handleSubmit,children:_ref2=>{let{errors,touched,isSubmitting}=_ref2;return/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Field,{name:\"password\",children:_ref3=>{let{field}=_ref3;return/*#__PURE__*/_jsx(TextField,{...field,fullWidth:true,label:\"New Password\",type:\"password\",variant:\"outlined\",error:touched.password&&Boolean(errors.password),helperText:touched.password&&errors.password});}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Field,{name:\"confirmPassword\",children:_ref4=>{let{field}=_ref4;return/*#__PURE__*/_jsx(TextField,{...field,fullWidth:true,label:\"Confirm New Password\",type:\"password\",variant:\"outlined\",error:touched.confirmPassword&&Boolean(errors.confirmPassword),helperText:touched.confirmPassword&&errors.confirmPassword});}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",size:\"large\",disabled:isSubmitting,sx:{py:1.5},children:isSubmitting?/*#__PURE__*/_jsx(LoadingSpinner,{message:\"Resetting password...\"}):'Reset Password'})})]})});}})]}),/*#__PURE__*/_jsx(Box,{sx:{mt:4,textAlign:'center'},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Remember your password?\",' ',/*#__PURE__*/_jsx(Link,{component:RouterLink,to:\"/login\",variant:\"body2\",color:\"primary\",underline:\"hover\",children:\"Back to login\"})]})})]})})});};export default ResetPasswordPage;","map":{"version":3,"names":["React","useState","Box","Typography","TextField","Button","Paper","Container","Grid","Link","Alert","CircularProgress","useTheme","RouterLink","useParams","useNavigate","Formik","Form","Field","Yup","useAuth","LoadingSpinner","enhancedApiCall","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ResetPasswordSchema","object","shape","password","string","min","required","confirmPassword","oneOf","ref","ResetPasswordPage","success","setSuccess","error","setError","resetPassword","token","navigate","theme","handleSubmit","values","_ref","setSubmitting","setTimeout","err","message","maxWidth","children","sx","py","elevation","p","borderRadius","mb","textAlign","variant","component","gutterBottom","color","severity","initialValues","validationSchema","onSubmit","_ref2","errors","touched","isSubmitting","container","spacing","item","xs","name","_ref3","field","fullWidth","label","type","Boolean","helperText","_ref4","size","disabled","mt","to","underline"],"sources":["/Users/Mike/Documents/ai-phone-service-codebase-v2/sloane-frontend-package/src/pages/auth/ResetPasswordPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { \n  Box, \n  Typography, \n  TextField, \n  Button, \n  Paper, \n  Container, \n  Grid, \n  Link, \n  Alert,\n  CircularProgress,\n  useTheme\n} from '@mui/material';\nimport { Link as RouterLink, useParams, useNavigate } from 'react-router-dom';\nimport { Formik, Form, Field } from 'formik';\nimport * as Yup from 'yup';\nimport { useAuth } from '../../contexts/AuthContext';\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\nimport { enhancedApiCall } from '../../utils/ErrorHandling';\n\nconst ResetPasswordSchema = Yup.object().shape({\n  password: Yup.string()\n    .min(8, 'Password must be at least 8 characters')\n    .required('Password is required'),\n  confirmPassword: Yup.string()\n    .oneOf([Yup.ref('password'), null], 'Passwords must match')\n    .required('Confirm password is required')\n});\n\nconst ResetPasswordPage = () => {\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState('');\n  const { resetPassword } = useAuth();\n  const { token } = useParams();\n  const navigate = useNavigate();\n  const theme = useTheme();\n\n  const handleSubmit = async (values, { setSubmitting }) => {\n    try {\n      setError('');\n      await resetPassword(token, values.password);\n      setSuccess(true);\n      setTimeout(() => {\n        navigate('/login');\n      }, 3000);\n    } catch (err) {\n      setError(err.message || 'Failed to reset password. Please try again.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\">\n      <Box sx={{ py: 8 }}>\n        <Paper elevation={3} sx={{ p: 4, borderRadius: 2 }}>\n          <Box sx={{ mb: 4, textAlign: 'center' }}>\n            <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n              Reset Password\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\">\n              Enter your new password below\n            </Typography>\n          </Box>\n\n          {success ? (\n            <Alert severity=\"success\" sx={{ mb: 3 }}>\n              Password reset successful! You will be redirected to the login page shortly.\n            </Alert>\n          ) : (\n            <>\n              {error && (\n                <Alert severity=\"error\" sx={{ mb: 3 }}>\n                  {error}\n                </Alert>\n              )}\n\n              {!token && (\n                <Alert severity=\"error\" sx={{ mb: 3 }}>\n                  Invalid or missing reset token. Please request a new password reset link.\n                </Alert>\n              )}\n\n              {token && (\n                <Formik\n                  initialValues={{ password: '', confirmPassword: '' }}\n                  validationSchema={ResetPasswordSchema}\n                  onSubmit={handleSubmit}\n                >\n                  {({ errors, touched, isSubmitting }) => (\n                    <Form>\n                      <Grid container spacing={3}>\n                        <Grid item xs={12}>\n                          <Field name=\"password\">\n                            {({ field }) => (\n                              <TextField\n                                {...field}\n                                fullWidth\n                                label=\"New Password\"\n                                type=\"password\"\n                                variant=\"outlined\"\n                                error={touched.password && Boolean(errors.password)}\n                                helperText={touched.password && errors.password}\n                              />\n                            )}\n                          </Field>\n                        </Grid>\n                        <Grid item xs={12}>\n                          <Field name=\"confirmPassword\">\n                            {({ field }) => (\n                              <TextField\n                                {...field}\n                                fullWidth\n                                label=\"Confirm New Password\"\n                                type=\"password\"\n                                variant=\"outlined\"\n                                error={touched.confirmPassword && Boolean(errors.confirmPassword)}\n                                helperText={touched.confirmPassword && errors.confirmPassword}\n                              />\n                            )}\n                          </Field>\n                        </Grid>\n                        <Grid item xs={12}>\n                          <Button\n                            type=\"submit\"\n                            fullWidth\n                            variant=\"contained\"\n                            color=\"primary\"\n                            size=\"large\"\n                            disabled={isSubmitting}\n                            sx={{ py: 1.5 }}\n                          >\n                            {isSubmitting ? (\n                              <LoadingSpinner message=\"Resetting password...\" />\n                            ) : (\n                              'Reset Password'\n                            )}\n                          </Button>\n                        </Grid>\n                      </Grid>\n                    </Form>\n                  )}\n                </Formik>\n              )}\n            </>\n          )}\n\n          <Box sx={{ mt: 4, textAlign: 'center' }}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Remember your password?{' '}\n              <Link\n                component={RouterLink}\n                to=\"/login\"\n                variant=\"body2\"\n                color=\"primary\"\n                underline=\"hover\"\n              >\n                Back to login\n              </Link>\n            </Typography>\n          </Box>\n        </Paper>\n      </Box>\n    </Container>\n  );\n};\n\nexport default ResetPasswordPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}