{"ast":null,"code":"// src/utils/ErrorHandling.jsx\nimport React,{useState}from'react';import{Box,Typography,Container,Paper,Alert,AlertTitle,Button,CircularProgress}from'@mui/material';import{useNavigate}from'react-router-dom';// Error boundary component for catching and displaying errors\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const ErrorBoundary=_ref=>{let{children}=_ref;const[error,setError]=useState(null);const[isLoading,setIsLoading]=useState(false);const navigate=useNavigate();// Function to handle API errors\nconst handleApiError=error=>{setError(error);setIsLoading(false);};// Function to retry the operation\nconst handleRetry=()=>{setError(null);setIsLoading(true);// Simulate retry operation\nsetTimeout(()=>{setIsLoading(false);},1500);};// Function to go back to dashboard\nconst handleGoToDashboard=()=>{navigate('/dashboard');};if(error){// Determine error type and show appropriate message\nlet errorTitle='An error occurred';let errorMessage='Something went wrong. Please try again.';let showRetry=true;if(error.name==='NetworkError'||error.message.includes('network')){errorTitle='Network Error';errorMessage='Unable to connect to the server. Please check your internet connection and try again.';}else if(error.status===401||error.status===403){errorTitle='Authentication Error';errorMessage='Your session has expired or you do not have permission to access this resource.';showRetry=false;}else if(error.status===404){errorTitle='Resource Not Found';errorMessage='The requested resource could not be found.';}else if(error.status>=500){errorTitle='Server Error';errorMessage='The server encountered an error. Please try again later.';}return/*#__PURE__*/_jsx(Container,{maxWidth:\"md\",sx:{py:4},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:4},children:[/*#__PURE__*/_jsxs(Alert,{severity:\"error\",sx:{mb:3},action:showRetry?/*#__PURE__*/_jsx(Button,{color:\"inherit\",size:\"small\",onClick:handleRetry,disabled:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'RETRY'}):null,children:[/*#__PURE__*/_jsx(AlertTitle,{children:errorTitle}),errorMessage]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'center',mt:2},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:handleGoToDashboard,sx:{mr:2},children:\"Go to Dashboard\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>window.location.reload(),children:\"Refresh Page\"})]})]})});}// Wrap children with error handling context\nreturn/*#__PURE__*/React.cloneElement(children,{onError:handleApiError,setIsLoading});};// Enhanced API call function\nexport const enhancedApiCall=async function(apiFunction){try{// Check for network connectivity\nif(!navigator.onLine){throw new Error('network');}for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}const response=await apiFunction(...args);return response;}catch(error){// Enhanced error handling\nconsole.error('API call failed:',error);// Determine error type\nif(!navigator.onLine){error.name='NetworkError';}// Rethrow with additional context\nthrow error;}};export default ErrorBoundary;","map":{"version":3,"names":["React","useState","Box","Typography","Container","Paper","Alert","AlertTitle","Button","CircularProgress","useNavigate","jsx","_jsx","jsxs","_jsxs","ErrorBoundary","_ref","children","error","setError","isLoading","setIsLoading","navigate","handleApiError","handleRetry","setTimeout","handleGoToDashboard","errorTitle","errorMessage","showRetry","name","message","includes","status","maxWidth","sx","py","p","severity","mb","action","color","size","onClick","disabled","display","justifyContent","mt","variant","mr","window","location","reload","cloneElement","onError","enhancedApiCall","apiFunction","navigator","onLine","Error","_len","arguments","length","args","Array","_key","response","console"],"sources":["/Users/Mike/Documents/ai-phone-service-codebase-v2/sloane-frontend-package/src/utils/ErrorHandling.jsx"],"sourcesContent":["// src/utils/ErrorHandling.jsx\nimport React, { useState } from 'react';\nimport { \n  Box, \n  Typography, \n  Container, \n  Paper, \n  Alert,\n  AlertTitle,\n  Button,\n  CircularProgress\n} from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\n\n// Error boundary component for catching and displaying errors\nexport const ErrorBoundary = ({ children }) => {\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n\n  // Function to handle API errors\n  const handleApiError = (error) => {\n    setError(error);\n    setIsLoading(false);\n  };\n\n  // Function to retry the operation\n  const handleRetry = () => {\n    setError(null);\n    setIsLoading(true);\n    // Simulate retry operation\n    setTimeout(() => {\n      setIsLoading(false);\n    }, 1500);\n  };\n\n  // Function to go back to dashboard\n  const handleGoToDashboard = () => {\n    navigate('/dashboard');\n  };\n\n  if (error) {\n    // Determine error type and show appropriate message\n    let errorTitle = 'An error occurred';\n    let errorMessage = 'Something went wrong. Please try again.';\n    let showRetry = true;\n\n    if (error.name === 'NetworkError' || error.message.includes('network')) {\n      errorTitle = 'Network Error';\n      errorMessage = 'Unable to connect to the server. Please check your internet connection and try again.';\n    } else if (error.status === 401 || error.status === 403) {\n      errorTitle = 'Authentication Error';\n      errorMessage = 'Your session has expired or you do not have permission to access this resource.';\n      showRetry = false;\n    } else if (error.status === 404) {\n      errorTitle = 'Resource Not Found';\n      errorMessage = 'The requested resource could not be found.';\n    } else if (error.status >= 500) {\n      errorTitle = 'Server Error';\n      errorMessage = 'The server encountered an error. Please try again later.';\n    }\n\n    return (\n      <Container maxWidth=\"md\" sx={{ py: 4 }}>\n        <Paper sx={{ p: 4 }}>\n          <Alert \n            severity=\"error\" \n            sx={{ mb: 3 }}\n            action={\n              showRetry ? (\n                <Button \n                  color=\"inherit\" \n                  size=\"small\" \n                  onClick={handleRetry}\n                  disabled={isLoading}\n                >\n                  {isLoading ? <CircularProgress size={24} /> : 'RETRY'}\n                </Button>\n              ) : null\n            }\n          >\n            <AlertTitle>{errorTitle}</AlertTitle>\n            {errorMessage}\n          </Alert>\n          \n          <Box sx={{ display: 'flex', justifyContent: 'center', mt: 2 }}>\n            <Button \n              variant=\"outlined\" \n              onClick={handleGoToDashboard}\n              sx={{ mr: 2 }}\n            >\n              Go to Dashboard\n            </Button>\n            <Button \n              variant=\"contained\" \n              onClick={() => window.location.reload()}\n            >\n              Refresh Page\n            </Button>\n          </Box>\n        </Paper>\n      </Container>\n    );\n  }\n\n  // Wrap children with error handling context\n  return React.cloneElement(children, { \n    onError: handleApiError,\n    setIsLoading\n  });\n};\n\n// Enhanced API call function\nexport const enhancedApiCall = async (apiFunction, ...args) => {\n  try {\n    // Check for network connectivity\n    if (!navigator.onLine) {\n      throw new Error('network');\n    }\n    \n    const response = await apiFunction(...args);\n    return response;\n  } catch (error) {\n    // Enhanced error handling\n    console.error('API call failed:', error);\n    \n    // Determine error type\n    if (!navigator.onLine) {\n      error.name = 'NetworkError';\n    }\n    \n    // Rethrow with additional context\n    throw error;\n  }\n};\n\nexport default ErrorBoundary;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}